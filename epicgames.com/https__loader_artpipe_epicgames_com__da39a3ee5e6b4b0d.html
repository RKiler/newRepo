{
  "endpoint": "https://loader.artpipe.epicgames.com",
  "hash": "8f41e25d77879401cd6be6f2eedf8555",
  "url": "https://unpipe-loader-bucket.s3.amazonaws.com/unpipe_loader.zip?AWSAccessKeyId=ASIATA4GVB54H5776KXD&Signature=mPpWbfU3KcxXMfyQ66RfVxhgtOU%3D&x-amz-security-token=IQoJb3JpZ2luX2VjEJL%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJHMEUCIQCvhMHG90X%2B9DCM4Fnn9%2FqJWCctQRAHZqBKycGkT3cA2gIgcpKsNF6y%2FqsWnaZLsWDZnimVDlIqKjD%2FhdVzoAF%2BiD8q9wIIi%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FARABGgwyMDgwNTE0NDE1MjgiDFw405RP5b%2FuJkbpxyrLAqHthhh%2BTQqjy2tiYl3ILLv%2B9xPzQdIxlqokXCHuW6Hi%2F4TQJKBdwO7jSBBKdI%2BLYpnFwzGTXvgsdBIfrkZHdqaKPL8Fv8Ds%2BWECauNSn7A5ZnhbGQFFNlbksqSQTOQWgCC1bBmgxOo6u2anudld4tCM5xQCkjRzEa0L88VveLkSMo5v8hlBmXA5eEVuPAC%2BesdTJ88nGvPa8uS7LH8EszHVa0I1fTPgcuWHjCLlZBd5dO9jcOPG%2B5ALFyN1DfW8S4ZQQYP8hfoFpIy74qHUxInyBDN3cBBMO4C6zEVUDAF4xF89uFf6TMI6nqYmwZy%2BH%2Bck585SERjVEHj%2ByK4DQd%2BzpHSq10UmQs05T8C6E1HvaNE0vJwzw5qAeiC56rr3HUMIWcMSXXzgUtwPkbtdMqjhwo9%2Fbg2mHJM1WeQKUpRsAs%2FwrgHcJbpm2jMw6tWbrwY6ngGT1O5zsUSROkrEMUzQE2LRHDqWDcNCpwc%2BruIPKp7cb7LcK5lVpXdPA8MAa%2BJQNCQ2%2By52VxYjZdViqdO9TRzAjKkVSnNHOCybSFQ6iLcz1OsE7a5W0Zwl04C8NcD1y9ekBPhcqqMycU%2FPUXkeo3lfgkWJsSFVLl9hEx4abNDALD8Npl6CHCASUttNYXhSsRlF9dMwWC4%2FB5NxgLMwPA%3D%3D&Expires=1709639005",
  "setup": "# Copyright Epic Games, Inc. All Rights Reserved.\nfrom __future__ import annotations\n\nimport os\nimport io\nimport re\nimport sys\nimport json\nimport time\nimport runpy\nimport pathlib\nimport zipfile\nimport tempfile\nfrom urllib.request import urlopen\n\n# Provided as exec globals when running this script\nloader_info = globals()['loader_info']\nloader_path = globals().get('cache_path')\ncache_only = globals().get('cache_only', False)\n\nif not loader_path:\n    namespace = re.sub(r\"[/\\\\?%*:|\\\"<>\\x7F\\x00-\\x1F]\", \"-\", loader_info['endpoint'].rpartition('://')[-1])\n    if sys.platform == 'win32':\n        loader_path = pathlib.Path.home() / f'AppData/Roaming/UnPipe/loader/{namespace}'\n    elif sys.platform.startswith('linux'):\n        loader_path = pathlib.Path.home() / f'.local/share/UnPipe/loader/{namespace}'\n    elif sys.platform == 'darwin':\n        loader_path = pathlib.Path.home() / f'Library/Application Support/UnPipe/loader/{namespace}'\n    else:\n        raise OSError(f'Unsupported platform {sys.platform}')\n\n# Create cache parent directory\nloader_path.parent.mkdir(parents=True, exist_ok=True)\ncache_file = loader_path.joinpath('.cached')\ncache_info = json.loads(cache_file.read_text()) if cache_file.exists() else {}\n\n# Only extract if the hashes missmatch\nif cache_info.get('hash') != loader_info['hash']:\n    # Grab the zip\n    with urlopen(loader_info['url']) as response:\n        loader_zipfile = zipfile.ZipFile(io.BytesIO(response.read()))\n\n    # Extract\n    with tempfile.TemporaryDirectory(dir=loader_path.parent) as tempdir:\n        loader_zipfile.extractall(path=tempdir)\n        if loader_path.exists():\n            # Let the tempdir cleanup handle the prior loader\n            os.rename(loader_path, tempdir + '/.cleanup')\n        os.rename(tempdir + '/unpipe_loader', loader_path)\n        cache_file.write_text(json.dumps({\n            'hash': loader_info['hash'],\n            'loader_url': loader_info['endpoint'],\n            'path': str(loader_path),\n            'timestamp': time.time(),\n        }, indent=2))\nelse:\n    cache_file.write_text(json.dumps({\n        **cache_info,\n        'timestamp': time.time(),\n    }))\n\n# If this isn't in cache-only mode, run the loader entry point\nif not cache_only:\n    runpy.run_path(str(loader_path))\n"
}